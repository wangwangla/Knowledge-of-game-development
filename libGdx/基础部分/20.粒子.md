# 粒子

- 将一些指定规则的图片构成，经过不同的展示方式，混合一些特殊的效果。

- 可以通过粒子展现出来一些特殊效果。

- 每一个粒子都有自己的属性：生命周期/速度/旋转等。

## 工具

粒子编辑器将若干资源合图片通过指定规则，制成类似于一些特效的编辑器

## 特点

- 提高效率
- 可视化

## 属性

- life:生命周期  
- life offset
- x offset  y offset
- spawn:粒子出生的形状
- spawn width / spawn height:出生宽高
- size:粒子大小
- velocity:速度
- Angle:角度
- rotation:旋转
- wind and Gravity:风吹效果，xy offset
- tint:粒子颜色
- Transparency：透明度
- options additive

## 使用

```java
effect = new ParticleEffect();
effect.load(Gdx.files.internal("data/test.p"), Gdx.files.internal("data"));
effect.setPosition(Gdx.graphics.getWidth() / 2, Gdx.graphics.getHeight() / 2);
emitters = new Array(effect.getEmitters());
effect.getEmitters().clear();
effect.getEmitters().add(emitters.get(0));

绘制
effect.draw(spriteBatch, delta);
```



## 封装

```
public class EffectTool extends Actor {
    private ParticleEffect effect;
    private String path;
    public EffectTool(String path){
        this.path = path;
        setName("effect");
        if (!MainGame.getAssetManager().isLoaded(path+"/lizi")) {
            MainGame.getAssetManager().load(path+"/lizi", ParticleEffect.class);
            MainGame.getAssetManager().finishLoading();
        }
        init(path);
    }
    public void init(String path){
        effect = MainGame.getAssetManager().get(path+"/lizi");
        effect.reset();
    }
    public EffectTool(ParticleEffect effect){
        this.effect = new ParticleEffect(effect);
        this.effect.reset();
        effect.start();


    }

    @Override
    protected void positionChanged() {
        super.positionChanged();
        effect.setPosition(getX(),getY());
    }


    @Override
    public void draw(Batch batch, float parentAlpha) {
        super.draw(batch, parentAlpha);
        effect.draw(batch, Gdx.graphics.getDeltaTime());
    }

    public void dispose(){
        try {
            MainGame.getAssetManager().unload(path);
        }catch (Exception e){
        }
    }
}
```

这个里面有一个需要注意的就是：通过manager获取到的是同一个对象，如果一个对象在不同的地方使用时可以的，如果需要同时播放同一个动画就需要

```
effect = MainGame.getAssetManager().get(path);
effect = new ParticleEffect(effect);
```







